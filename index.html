<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Discoveries 레벨 진단 시스템</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 상단 헤더 -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="assets/images/logo.png" alt="ED School Logo">
                <h1>English Discoveries <span>레벨 진단 시스템</span></h1>
            </div>
            <nav class="nav">
                <a href="index.html#process">진단 과정</a>
                <a href="index.html#compatibility">레벨 호환성</a>
                <a href="index.html#faq">FAQ</a>
                <a href="free-test.html" class="free-test-btn">무료 테스트</a>
            </nav>
        </div>
    </header>

    <!-- 메인 컨텐츠 -->
    <main class="main-content">
        <div class="container">
            <!-- 단계 진행 표시기 -->
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">ED School 접속</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">스피킹 맥스 녹음</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">음성 파일 업로드</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">AI 분석 및 결과</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">ED 수강 유도</div>
                </div>
            </div>

            <!-- Step 1: ED School 접속 -->
            <section class="step-content active" id="step-1">
                <div class="step-header">
                    <h2>STEP 1: ED School 접속</h2>
                    <p>ED School에 로그인하여 스피킹 맥스 프로그램을 실행해주세요.</p>
                </div>
                <div class="step-body">
                    <div class="step-content-card">
                        <div class="content-icon">
                            <i class="fas fa-laptop-house"></i>
                        </div>
                        <h3>ED School 접속 가이드</h3>
                        <p>1. ED School 웹사이트(<a href="https://edschool.com" target="_blank">https://edschool.com</a>) 접속</p>
                        <p>2. 회원 로그인 또는 무료 체험 회원가입</p>
                        <p>3. 마이페이지에서 '스피킹 맥스' 프로그램 실행</p>
                        
                        <div class="step-navigation">
                            <button class="btn next-btn" onclick="goToStep(2)">
                                다음 단계로 <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 2: 스피킹 맥스 녹음 -->
            <section class="step-content" id="step-2">
                <div class="step-header">
                    <h2>STEP 2: 스피킹 맥스 녹음</h2>
                    <p>스피킹 맥스 프로그램을 사용하여 영어 음성을 녹음해주세요.</p>
                </div>
                <div class="step-body">
                    <div class="step-content-card">
                        <div class="content-icon">
                            <i class="fas fa-microphone-alt"></i>
                        </div>
                        <h3>녹음 가이드</h3>
                        <p>1. 스피킹 맥스 프로그램 내 '녹음하기' 버튼 클릭</p>
                        <p>2. 제시된 주제에 대해 1-2분간 영어로 발화</p>
                        <p>3. 녹음 완료 후 파일 저장 (MP3/WAV 형식)</p>
                        
                        <div class="recording-tips">
                            <h4><i class="fas fa-lightbulb"></i> 녹음 팁</h4>
                            <ul>
                                <li>조용한 환경에서 녹음해주세요</li>
                                <li>자연스러운 발화 속도와 억양을 유지해주세요</li>
                                <li>최소 30초 이상, 권장 1-2분 분량으로 녹음</li>
                            </ul>
                        </div>
                        
                        <div class="step-navigation">
                            <button class="btn prev-btn" onclick="goToStep(1)">
                                <i class="fas fa-arrow-left"></i> 이전 단계
                            </button>
                            <button class="btn next-btn" onclick="goToStep(3)">
                                다음 단계로 <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

<!-- Step 3: 음성 파일 업로드 -->
<section class="step-content" id="step-3">
    <div class="step-header">
        <h2>STEP 3: 음성 파일 업로드</h2>
        <p>아래 방법 중 하나를 선택하여 음성 파일을 준비해주세요.</p>
        
        <!-- 진행 상태 표시기 -->
        <div class="step-progress-indicator">
            <div class="progress-dots">
                <span class="dot active"></span>
                <span class="dot active"></span>
                <span class="dot active current"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
            <div class="progress-label">파일 업로드/녹음</div>
        </div>
    </div>
    
    <div class="step-body">
        <!-- 모바일 환경 감지 메시지 -->
        <div class="mobile-environment-message" id="mobileEnvMessage" style="display: none;">
            <div class="mobile-message-content">
                <i class="fas fa-mobile-alt"></i>
                <div class="mobile-message-text">
                    <h4>모바일 환경 감지됨</h4>
                    <p>모바일에서는 '파일 업로드'를 권장합니다. 녹음 기능은 일부 브라우저에서 제한될 수 있습니다.</p>
                </div>
            </div>
        </div>
        
        <!-- 방법 선택 탭 -->
        <div class="method-tabs">
            <button id="recordMethodBtn" class="method-tab" onclick="selectUploadMethod('record')">
                <div class="tab-content">
                    <div class="tab-icon">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <div class="tab-text">
                        <div class="tab-title">웹에서 직접 녹음</div>
                        <div class="tab-subtitle">마이크로 바로 녹음</div>
                    </div>
                </div>
            </button>
            <button id="fileMethodBtn" class="method-tab active" onclick="selectUploadMethod('file')">
                <div class="tab-content">
                    <div class="tab-icon">
                        <i class="fas fa-upload"></i>
                    </div>
                    <div class="tab-text">
                        <div class="tab-title">파일 업로드</div>
                        <div class="tab-subtitle">기존 파일 업로드</div>
                    </div>
                </div>
            </button>
        </div>
        
        <!-- 방법 1: 웹에서 직접 녹음 -->
        <div class="method-section" id="directRecordingSection">
            <div class="recording-controls">
                <h3><i class="fas fa-microphone"></i> 직접 녹음하기</h3>
                <p>마이크 접근 권한을 허용하고 녹음을 시작해주세요.</p>
                
                <!-- 모바일 녹음 경고 -->
                <div class="mobile-recording-warning" id="mobileRecordingWarning" style="display: none;">
                    <div class="warning-content">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="warning-text">
                            <h5>모바일 녹음 제한 안내</h5>
                            <p>일부 모바일 브라우저에서는 녹음 기능이 제한될 수 있습니다.</p>
                            <p>녹음이 불가능한 경우 '파일 업로드' 방법을 이용해주세요.</p>
                        </div>
                    </div>
                </div>
                
                <div class="recording-panel">
                    <div class="recording-status">
                        <div class="recording-indicator">
                            <div class="indicator-dot"></div>
                            <span id="recordingTime">00:00</span>
                        </div>
                        <div class="recording-buttons">
                            <button id="recordBtn" class="record-btn">
                                <i class="fas fa-circle"></i> 녹음 시작
                            </button>
                            <button id="stopBtn" class="stop-btn" style="display: none;">
                                <i class="fas fa-stop"></i> 녹음 중지
                            </button>
                            <button id="playBtn" class="play-btn" disabled>
                                <i class="fas fa-play"></i> 재생
                            </button>
                        </div>
                    </div>
                    
                    <div class="audio-waveform">
                        <div class="waveform-placeholder">
                            <p>녹음을 시작하면 음파가 표시됩니다.</p>
                        </div>
                    </div>
                </div>
                
                <div class="recording-tip">
                    <i class="fas fa-info-circle"></i>
                    <p>녹음은 최대 5분까지 가능하며, 권장 길이는 1-2분입니다.</p>
                </div>
            </div>
        </div>
        
        <!-- 방법 2: 파일 업로드 - 모바일 최적화 -->
        <div class="method-section active" id="fileUploadSection">
            <div class="file-upload-area">
                <h3><i class="fas fa-upload"></i> 파일 업로드</h3>
                <p>녹음된 음성 파일을 업로드해주세요. (MP3, WAV, M4A 지원)</p>
                
                <!-- 모바일 최적화 업로드 버튼 -->
                <div class="mobile-upload-container">
                    <!-- 기존 업로드 박스 (PC용) -->
                    <div class="upload-box desktop-upload" onclick="triggerFileInput()">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h4>파일을 드래그하거나 클릭하여 업로드</h4>
                        <p>MP3, WAV, M4A 형식, 최대 50MB</p>
                    </div>
                    
                    <!-- 모바일 전용 업로드 버튼 -->
                    <div class="mobile-upload-buttons" style="display: none;">
                        <div class="mobile-upload-options">
                            <div class="upload-option" onclick="triggerFileInput()">
                                <div class="option-icon">
                                    <i class="fas fa-file-audio"></i>
                                </div>
                                <div class="option-text">
                                    <h5>파일에서 선택</h5>
                                    <p>기기에 저장된 음성 파일 선택</p>
                                </div>
                            </div>
                            
                            <div class="upload-option" onclick="showMobileRecordGuide()">
                                <div class="option-icon">
                                    <i class="fas fa-microphone"></i>
                                </div>
                                <div class="option-text">
                                    <h5>모바일로 녹음</h5>
                                    <p>모바일 녹음 앱 사용 가이드</p>
                                </div>
                            </div>
                            
                            <div class="upload-option" onclick="showCloudStorageOptions()">
                                <div class="option-icon">
                                    <i class="fas fa-cloud"></i>
                                </div>
                                <div class="option-text">
                                    <h5>클라우드에서 가져오기</h5>
                                    <p>Google Drive, iCloud 등</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mobile-upload-tip">
                            <i class="fas fa-lightbulb"></i>
                            <p>음성 메모, 녹음 앱, 카카오톡 음성 파일 등도 업로드 가능합니다.</p>
                        </div>
                    </div>
                </div>
                
                <input type="file" id="audioFile" accept=".mp3,.wav,.m4a,.ogg,audio/*" style="display: none;">
                
                <div id="fileStatus" class="file-status">
                    <!-- 파일 정보가 여기에 표시됨 -->
                </div>
                
                <!-- 모바일 녹음 가이드 모달 -->
                <div class="mobile-record-guide-modal" id="mobileRecordGuide" style="display: none;">
                    <div class="modal-overlay" onclick="hideMobileRecordGuide()"></div>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4><i class="fas fa-microphone"></i> 모바일 녹음 가이드</h4>
                            <button class="close-btn" onclick="hideMobileRecordGuide()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="guide-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h5>기본 녹음 앱 사용</h5>
                                    <p>스마트폰의 기본 '음성 메모' 또는 '녹음기' 앱을 실행하세요.</p>
                                </div>
                            </div>
                            <div class="guide-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h5>영어로 녹음하기</h5>
                                    <p>자연스러운 영어로 1-2분간 발화를 녹음하세요.</p>
                                </div>
                            </div>
                            <div class="guide-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h5>파일 저장</h5>
                                    <p>녹음 완료 후 파일을 저장하세요. (MP3 또는 M4A 형식)</p>
                                </div>
                            </div>
                            <div class="guide-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h5>파일 업로드</h5>
                                    <p>저장된 파일을 선택하여 이 페이지에서 업로드하세요.</p>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn modal-btn" onclick="hideMobileRecordGuide()">
                                확인
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 클라우드 저장소 옵션 모달 -->
                <div class="cloud-storage-modal" id="cloudStorageModal" style="display: none;">
                    <div class="modal-overlay" onclick="hideCloudStorageOptions()"></div>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4><i class="fas fa-cloud"></i> 클라우드 저장소</h4>
                            <button class="close-btn" onclick="hideCloudStorageOptions()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p class="modal-description">클라우드에 저장된 음성 파일을 업로드하세요. 먼저 해당 앱에서 파일을 다운로드하신 후 업로드해주세요.</p>
                            
                            <div class="cloud-options">
                                <div class="cloud-option" onclick="showCloudHelp('google')">
                                    <div class="cloud-icon">
                                        <i class="fab fa-google-drive"></i>
                                    </div>
                                    <span>Google Drive</span>
                                </div>
                                <div class="cloud-option" onclick="showCloudHelp('icloud')">
                                    <div class="cloud-icon">
                                        <i class="fas fa-cloud"></i>
                                    </div>
                                    <span>iCloud</span>
                                </div>
                                <div class="cloud-option" onclick="showCloudHelp('dropbox')">
                                    <div class="cloud-icon">
                                        <i class="fab fa-dropbox"></i>
                                    </div>
                                    <span>Dropbox</span>
                                </div>
                                <div class="cloud-option" onclick="showCloudHelp('onedrive')">
                                    <div class="cloud-icon">
                                        <i class="fab fa-microsoft"></i>
                                    </div>
                                    <span>OneDrive</span>
                                </div>
                            </div>
                            
                            <div class="cloud-help" id="cloudHelp" style="display: none;">
                                <div class="help-content">
                                    <h5 id="cloudHelpTitle"></h5>
                                    <p id="cloudHelpText"></p>
                                    <button class="btn help-btn" onclick="hideCloudHelp()">
                                        닫기
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="file-requirements">
                    <h5><i class="fas fa-check-circle"></i> 파일 요구사항</h5>
                    <ul>
                        <li>지원 형식: MP3, WAV, M4A, OGG</li>
                        <li>최대 파일 크기: 50MB</li>
                        <li>권장 길이: 30초 ~ 5분</li>
                        <li>권장 샘플링: 16kHz 이상</li>
                    </ul>
                </div>
                
                <!-- 모바일 업로드 힌트 -->
                <div class="mobile-upload-hint" id="mobileUploadHint" style="display: none;">
                    <h5><i class="fas fa-question-circle"></i> 모바일 업로드 팁</h5>
                    <ul>
                        <li>파일이 보이지 않으면 '모든 파일' 또는 '오디오' 필터를 확인하세요</li>
                        <li>카카오톡, WhatsApp 등의 음성 파일도 업로드 가능</li>
                        <li>파일 이름에 '.mp3' 확장자가 있는지 확인하세요</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- 디스클레이머 동의 -->
        <div class="disclaimer-agreement">
            <div class="disclaimer-check">
                <input type="checkbox" id="disclaimerCheck">
                <label for="disclaimerCheck">
                    본인은 ED School의 개인정보 처리방침과 서비스 이용약관에 동의하며, 
                    업로드된 음성 데이터가 분석 목적으로만 사용됨을 확인합니다.
                </label>
            </div>
        </div>
        
        <!-- 개선된 분석 버튼 -->
        <div class="step-navigation">
            <button class="btn prev-btn" onclick="goToStep(2)">
                <i class="fas fa-arrow-left"></i> 이전 단계
            </button>
            <button class="btn analyze-btn" id="analyzeBtn" onclick="startAdvancedAnalysis()" disabled>
                <div class="btn-content">
                    <div class="btn-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="btn-text">
                        <div class="btn-title">고급 AI 분석 시작</div>
                        <div class="btn-subtitle">BBC 앵커 벤치마크 기반</div>
                    </div>
                </div>
            </button>
        </div>
    </div>
</section>

            <!-- Step 4: AI 분석 및 결과 -->
            <section class="step-content" id="step-4">
                <div class="step-header">
                    <h2>STEP 4: 고급 AI 분석 및 레벨 결과</h2>
                    <p>BBC 앵커 벤치마크 기반 음성 분석을 수행합니다.</p>
                </div>
                <div class="step-body">
                    <!-- 분석 진행 상태 -->
                    <div class="analysis-progress" id="analysisProgress">
                        <h3><i class="fas fa-brain"></i> 고급 AI 분석 진행 중...</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-stats">
                            <div class="stat">
                                <span class="stat-label">언어 감지</span>
                                <span class="stat-value" id="languageStat">진단 중</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">발화 밀도 분석</span>
                                <span class="stat-value" id="densityStat">0%</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">벤치마크 비교</span>
                                <span class="stat-value" id="benchmarkStat">0%</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">종합 평가</span>
                                <span class="stat-value" id="overallStat">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 개선된 분석 결과 -->
                    <div class="analysis-result" id="analysisResult" style="display: none;">
                        <h3>고급 레벨 진단 결과</h3>
                        
                        <!-- 신뢰도 정보 -->
                        <div class="confidence-section" id="confidenceInfo">
                            <!-- 동적 생성 -->
                        </div>
                        
                        <!-- 결과 카드 -->
                        <div class="result-card">
                            <div class="result-header">
                                <h4>당신의 영어 레벨은</h4>
                                <div class="ed-level-badge" id="edLevelBadge">
                                    <span class="level-name">Intermediate 2</span>
                                    <span class="level-desc">중급</span>
                                </div>
                            </div>
                            
                            <div class="result-details">
                                <div class="result-item">
                                    <div class="result-label">CEFR 레벨</div>
                                    <div class="result-value cefr-b1" id="cefrLevel">B1</div>
                                </div>
                                <div class="result-item">
                                    <div class="result-label">TOEIC 추정 점수</div>
                                    <div class="result-value" id="toeicScore">650-720</div>
                                </div>
                                <div class="result-item">
                                    <div class="result-label">IELTS 추정 점수</div>
                                    <div class="result-value" id="ieltsScore">4.5-5.0</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 개선된 세부 분석 결과 -->
                        <div class="detailed-analysis">
                            <h4>세부 분석 리포트</h4>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <div class="analysis-label">발음 명료도</div>
                                    <div class="analysis-score">
                                        <div class="score-bar">
                                            <div class="score-fill" id="pronunciationScore" style="width: 75%"></div>
                                        </div>
                                        <span class="score-value" id="pronunciationValue">75/100</span>
                                    </div>
                                </div>
                                <div class="analysis-item">
                                    <div class="analysis-label">대화 유창성</div>
                                    <div class="analysis-score">
                                        <div class="score-bar">
                                            <div class="score-fill" id="fluencyScore" style="width: 68%"></div>
                                        </div>
                                        <span class="score-value" id="fluencyValue">68/100</span>
                                    </div>
                                </div>
                                <div class="analysis-item">
                                    <div class="analysis-label">어휘 다양성</div>
                                    <div class="analysis-score">
                                        <div class="score-bar">
                                            <div class="score-fill" id="vocabularyScore" style="width: 72%"></div>
                                        </div>
                                        <span class="score-value" id="vocabularyValue">72/100</span>
                                    </div>
                                </div>
                                <div class="analysis-item">
                                    <div class="analysis-label">문법 정확도</div>
                                    <div class="analysis-score">
                                        <div class="score-bar">
                                            <div class="score-fill" id="grammarScore" style="width: 65%"></div>
                                        </div>
                                        <span class="score-value" id="grammarValue">65/100</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 비영어 감지 메시지 -->
                        <div class="non-english-warning" id="nonEnglishWarning" style="display: none;">
                            <div class="warning-content">
                                <i class="fas fa-exclamation-triangle"></i>
                                <div class="warning-text">
                                    <h5>비영어 콘텐츠 감지</h5>
                                    <p>입력된 오디오에서 영어가 아닌 내용이 감지되었습니다. 정확한 레벨 진단을 위해 영어 음성 파일을 업로드해주세요.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 무료 테스트 모드일 때만 표시되는 버튼 -->
                        <div class="test-mode-buttons" id="testModeButtons" style="display: none;">
                            <button class="btn share-btn">
                                <i class="fas fa-share-alt"></i> 결과 공유하기
                            </button>
                            <button class="btn course-btn">
                                <i class="fas fa-graduation-cap"></i> 추천 코스 보기
                            </button>
                        </div>
                    </div>
                    
                    <div class="step-navigation">
                        <button class="btn prev-btn" onclick="goToStep(3)">
                            <i class="fas fa-arrow-left"></i> 이전 단계
                        </button>
                        <button class="btn next-btn" id="nextToStep5" onclick="goToStep(5)" style="display: none;">
                            다음 단계로 <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Step 5: ED 수강 유도 -->
            <section class="step-content" id="step-5">
                <div class="step-header">
                    <h2>STEP 5: ED School 수강 유도</h2>
                    <p>진단 결과를 바탕으로 맞춤형 학습 코스를 추천해드립니다.</p>
                </div>
                <div class="step-body">
                    <div class="course-recommendation">
                        <div class="recommendation-header">
                            <h3><i class="fas fa-graduation-cap"></i> 맞춤형 학습 코스 추천</h3>
                            <p>AI 분석 결과를 기반으로 최적의 ED School 코스를 안내해드립니다.</p>
                        </div>
                        
                        <div class="recommendation-card">
                            <div class="course-info">
                                <div class="course-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="course-details">
                                    <h4>Intermediate Communication Course</h4>
                                    <p class="course-level">레벨: Intermediate 2 (B1)</p>
                                    <p class="course-duration">기간: 12주 과정</p>
                                    <p class="course-description">
                                        중급 학습자를 위한 대화 중심 커리큘럼으로, 실생활에서 즉시 활용 가능한 
                                        영어 표현과 발음 교정을 포함합니다.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="course-features">
                                <h5>주요 학습 포인트</h5>
                                <div class="features-grid">
                                    <div class="feature">
                                        <i class="fas fa-comments"></i>
                                        <span>실생활 대화</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-volume-up"></i>
                                        <span>발음 교정</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-briefcase"></i>
                                        <span>비즈니스 영어</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-film"></i>
                                        <span>미디어 이해</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="course-cta">
                                <button class="btn enroll-btn">
                                    <i class="fas fa-user-plus"></i> 지금 수강 신청하기
                                </button>
                                <a href="free-test.html" class="btn retest-btn">
                                    <i class="fas fa-redo"></i> 무료 테스트 다시하기
                                </a>
                            </div>
                        </div>
                        
                        <div class="additional-benefits">
                            <h4><i class="fas fa-gift"></i> ED School 특별 혜택</h4>
                            <div class="benefits-list">
                                <div class="benefit">
                                    <i class="fas fa-check-circle"></i>
                                    <span>1:1 맞춤 코칭</span>
                                </div>
                                <div class="benefit">
                                    <i class="fas fa-check-circle"></i>
                                    <span>AI 피드백 리포트</span>
                                </div>
                                <div class="benefit">
                                    <i class="fas fa-check-circle"></i>
                                    <span>진도 모니터링</span>
                                </div>
                                <div class="benefit">
                                    <i class="fas fa-check-circle"></i>
                                    <span>수료증 발급</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-navigation">
                        <button class="btn prev-btn" onclick="goToStep(4)">
                            <i class="fas fa-arrow-left"></i> 이전 단계
                        </button>
                        <button class="btn complete-btn" onclick="showCompletionMessage()">
                            <i class="fas fa-check-circle"></i> 진단 완료
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="assets/images/logo.png" alt="ED School Logo" style="height: 40px;">
                    <p>English Discoveries</p>
                </div>
                <div class="footer-links">
                    <a href="#">이용약관</a>
                    <a href="#">개인정보처리방침</a>
                    <a href="#">고객센터</a>
                    <a href="#">자주 묻는 질문</a>
                </div>
                <div class="footer-info">
                    <p>© 2024 English Discoveries. All rights reserved.</p>
                    <p>본 서비스는 영어 레벨 진단을 위한 참고 자료로만 활용되며, 공식 시험 점수를 대체하지 않습니다.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- 완료 메시지 모달 -->
    <div class="completion-modal" id="completionModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-check-circle"></i>
                <h3>진단 완료!</h3>
            </div>
            <div class="modal-body">
                <p>영어 레벨 진단이 성공적으로 완료되었습니다.</p>
                <p>더 정확한 진단과 체계적인 학습을 위해 ED School 정식 프로그램을 추천합니다.</p>
            </div>
            <div class="modal-footer">
                <button class="btn modal-btn" onclick="closeCompletionModal()">
                    확인
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript 파일 로드 -->
    <script src="js/evaluation-engine.js"></script>
    <script src="js/script.js"></script>
    
    <script>
        // URL 파라미터 확인 및 테스트 모드 처리
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const testMode = urlParams.get('test');
            
            if (testMode === 'free') {
                // 무료 테스트 모드로 시작
                localStorage.setItem('testMode', 'free');
                
                // Step 3으로 바로 이동 (파일 업로드/녹음 단계)
                goToStep(3);
                
                // 무료 테스트 안내 메시지
                setTimeout(() => {
                    showTestModeMessage();
                }, 1000);
            } else {
                localStorage.setItem('testMode', 'standard');
            }
        });
        
        function showTestModeMessage() {
            const testModeDiv = document.createElement('div');
            testModeDiv.className = 'test-mode-message';
            testModeDiv.innerHTML = `
                <div class="message-content">
                    <i class="fas fa-gift"></i>
                    <div class="message-text">
                        <h4>무료 테스트 모드</h4>
                        <p>현재 무료 테스트 모드로 진행 중입니다. 음성 파일을 업로드하거나 녹음하여 레벨을 진단해보세요.</p>
                    </div>
                </div>
            `;
            
            const stepBody = document.querySelector('#step-3 .step-body');
            if (stepBody) {
                stepBody.prepend(testModeDiv);
                
                // 10초 후 자동 제거
                setTimeout(() => {
                    testModeDiv.style.opacity = '0';
                    setTimeout(() => {
                        if (testModeDiv.parentNode) {
                            testModeDiv.parentNode.removeChild(testModeDiv);
                        }
                    }, 500);
                }, 10000);
            }
        }
        
        function showCompletionMessage() {
            const modal = document.getElementById('completionModal');
            if (modal) {
                modal.style.display = 'block';
            }
        }
        
        function closeCompletionModal() {
            const modal = document.getElementById('completionModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // 모달 외부 클릭 시 닫기
        window.onclick = function(event) {
            const modal = document.getElementById('completionModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
